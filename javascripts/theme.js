var PurpleMine=PurpleMine||{};PurpleMine.HistoryTabs=function(){"use strict";var t,s={en:{all:"All",notes:"Notes",details:"Changes"},ro:{all:"Toate",notes:"Note",details:"Schimbări"},fr:{all:"Tout",notes:"Remarques",details:"Changements"},pl:{all:"Wszystko",notes:"Notatki",details:"Zmiany"},de:{all:"Alles",notes:"Kommentare",details:"Änderungen"},ja:{all:"すべて",notes:"注記",details:"変更"}};var a=function(){var s=$(this),a=s.attr("data-tab");t.$tabs.removeClass("selected"),s.addClass("selected"),t.$history.removeClass("hide-details").removeClass("hide-notes"),"notes"===a?t.$history.addClass("hide-details"):"details"===a&&t.$history.addClass("hide-notes")};return function(){if(t)return t;var e,i,l,n;t=this,this.$tabsContainer=null,this.$tabs=null,this.$history=$("#history"),this.lang=document.documentElement.lang,void 0===s[this.lang]&&(this.lang="en"),this._=s[this.lang],this.$history.length>0&&(e="",n="</a></li>",e+='<div class="tabs"><ul>',e+=(i='<li><a href="javascript:;" class="')+"selected "+(l='history-tab" data-tab="')+'all">'+t._.all+n,e+=i+l+'notes">'+t._.notes+n,e+=i+l+'details">'+t._.details+n,e+="</ul></div>",t.$tabsContainer=$(e),$("#history > h3").after(t.$tabsContainer),t.$tabs=t.$tabsContainer.find(".history-tab"),t.$tabs.on("click",a),t.$history.find(".has-notes:first").addClass("first-of-notes"),t.$history.find(".has-details:first").addClass("first-of-details"))}}();
PurpleMine.MenuCollapse=function(){"use strict";var e,n={en:{topMenuToggler:"Expand/collapse top menu"},ro:{topMenuToggler:"Deschide/închide meniul de sus"},fr:{topMenuToggler:"Développer/réduire le menu principal"},pl:{topMenuToggler:"Zwiń/rozwiń górne menu"},de:{topMenuToggler:"Ein-/Ausklappen Hauptmenu"},ja:{topMenuToggler:"トップメニューの展開/折りたたみ"}};function l(){if(e)return e;e=this,this.lang=document.documentElement.lang,void 0===n[this.lang]&&(this.lang="en"),this._=n[this.lang],this.menus={top:{$el:$("#top-menu")}};for(var l in this.menus)this.menus.hasOwnProperty(l)&&this.menus[l].$el.length>0&&o(l)}function o(n){if("none"===e.menus[n].$el.css("maxHeight"))return!1;var l,o,s,u;e.menus[n].collapsed=!0,window.localStorage&&(e.menus[n].collapsed=null===localStorage.getItem(t(n))),o=(l=n)+"-menu-toggler",s=e._[l+"MenuToggler"],u='<a href="javascript:;" class="'+o+'" title="'+s+'"></a>',e.menus[l].$toggler=$(u),e.menus[l].$el.prepend(e.menus[l].$toggler),e.menus[l].$toggler.on("click",{menu:l},e.toggleMenu),!1===e.isCollapsed(n)&&e.expandMenu(n)}function t(e){return"PurpleMine:"+e+"MenuExpanded"}return l.prototype.toggleMenu=function(n){var l=n.data.menu||"";e.isCollapsed(l)?e.expandMenu(l):e.collapseMenu(l)},l.prototype.isCollapsed=function(e){return this.menus[e].collapsed},l.prototype.expandMenu=function(e){this.menus[e].$el.addClass("expanded"),this.menus[e].$toggler.addClass("expanded"),this.menus[e].collapsed=!1,window.localStorage&&localStorage.setItem(t(e),"x")},l.prototype.collapseMenu=function(e){this.menus[e].$el.removeClass("expanded"),this.menus[e].$toggler.removeClass("expanded"),this.menus[e].collapsed=!0,window.localStorage&&localStorage.removeItem(t(e))},l}();
PurpleMine.RevisionGraph=function(e,i,r){"use strict";var t=i,a=$.map(t,function(e){return e}),n=a.length-1,o=$("table.changesets tr.changeset");null!==revisionGraph?revisionGraph.clear():revisionGraph=new Raphael(e);var s=revisionGraph.set(),p=o.first().find("td").first().position().left-$(e).position().left,c=$(e).position().top,h=p+20*(r+1),l=o.last().position().top+o.last().height()-c;revisionGraph.setSize(h,l);var d,v,f,u,G,w,g,m,R=["#e74c3c","#584492","#019851","#ed820c","#4183c4"];if(r>=R.length){Raphael.getColor.reset();for(var C=0;C<=r;C++)R.push(Raphael.getColor(.9))}$.each(a,function(e,i){i.hasOwnProperty("space")||(i.space=0),f=o.eq(n-i.rdmid).position().top-c+17,v=p+10+20*i.space,revisionGraph.circle(v,f,3.5).attr({fill:R[i.space],stroke:"none"}).toFront(),$.each(i.parent_scmids,function(e,r){(d=t[r])?(d.hasOwnProperty("space")||(d.space=0),G=o.eq(n-d.rdmid).position().top-c+17,u=p+10+20*d.space,w=d.space===i.space?revisionGraph.path(["M",v,f,"V",G]):revisionGraph.path(["M",v,f,"C",v,f,v,f+(G-f)/2,v+(u-v)/2,f+(G-f)/2,"C",v+(u-v)/2,f+(G-f)/2,u,G-(G-f)/2,u,G])):w=revisionGraph.path(["M",v,f,"V",l]),w.attr({stroke:R[i.space],"stroke-width":1.5}).toBack()}),(m=revisionGraph.circle(v,f,10)).attr({fill:"#000",opacity:0,cursor:"pointer",href:i.href}),null!==i.refs&&i.refs.length>0&&((g=document.createElementNS(revisionGraph.canvas.namespaceURI,"title")).appendChild(document.createTextNode(i.refs)),m.node.appendChild(g)),s.push(m)}),s.toFront()},$(function(){"use strict";window.drawRevisionGraph&&(window.drawRevisionGraph=PurpleMine.RevisionGraph,$(window).resize())});
PurpleMine.SidebarToggler=function(){"use strict";var e,i={en:{toggler:"Toggle sidebar"},ro:{toggler:"Deschide/închide bara laterală"},fr:{toggler:"Basculer la barre latérale"},pl:{toggler:"Pokaż/ukryj panel boczny"},ja:{toggler:"サイドバーの切り替え"}};function a(){if(e)return e;e=this,this.sidebarVisible=!0,this.sidebarHiding=null,this.$toggler=null,this.$main=$("#main"),this.$sidebar=$("#sidebar"),this.lang=document.documentElement.lang,void 0===i[this.lang]&&(this.lang="en"),this._=i[this.lang],"relative"===this.$main.css("position")&&$(window).load(function(){$("#context-menu").appendTo("#wrapper3")}),function(){window.localStorage&&(e.sidebarVisible=null===localStorage.getItem("PurpleMine:sidebarHidden"));e.$sidebar.length>0&&!1===e.$main.hasClass("nosidebar")&&(a='<a href="javascript:;" class="sidebar-toggler" title="'+e._.toggler+'"></a>',e.$toggler=$(a),e.$main.append(e.$toggler),e.$toggler.on("click",e.toggleSidebar),i=document.getElementsByTagName("body")[0],window.onkeydown=function(a){i===a.target&&83===a.keyCode&&!1===a.ctrlKey&&!1===a.altKey&&!1===a.shiftKey&&e.toggleSidebar()},!1===e.sidebarVisible&&e.hideSidebar(!0));var i;var a}()}return a.prototype.toggleSidebar=function(){e.sidebarVisible?e.hideSidebar():e.showSidebar()},a.prototype.hideSidebar=function(i){!0===i?this.$sidebar.addClass("sidebar-hiding sidebar-hidden"):(this.$sidebar.addClass("sidebar-hiding"),this.sidebarHiding=setTimeout(function(){e.$sidebar.addClass("sidebar-hidden")},500)),this.$toggler.addClass("sidebar-hidden"),this.sidebarVisible=!1,window.localStorage&&localStorage.setItem("PurpleMine:sidebarHidden","x")},a.prototype.showSidebar=function(){clearTimeout(this.sidebarHiding),e.$sidebar.removeClass("sidebar-hidden"),setTimeout(function(){e.$sidebar.removeClass("sidebar-hiding")},50),this.$toggler.removeClass("sidebar-hidden"),this.sidebarVisible=!0,window.localStorage&&localStorage.removeItem("PurpleMine:sidebarHidden")},a}();$(function(){"use strict";function e(){$("label").each(function(){var e=$(this),n=e.text(),t=e.find("input"),a=e.find("label-text");t.length>0&&0==a.length&&e.text("").append(t.clone()).append('<span class="label-text">'+n+"</span>")})}$(document.links).filter(function(){return this.hostname!=window.location.hostname}).attr("target","_blank"),$(document).ajaxComplete(function(){e()}),e(),new PurpleMine.SidebarToggler,new PurpleMine.HistoryTabs,new PurpleMine.MenuCollapse});